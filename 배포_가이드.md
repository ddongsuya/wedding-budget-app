# 🚀 배포 가이드 - 무료로 배포하기

## 추천 배포 방법 (완전 무료!)

### 방법 1: Vercel + Supabase (가장 쉬움!) ⭐

**장점:**
- 완전 무료
- 자동 배포
- 빠른 속도
- 도메인 제공

---

## 📦 1단계: GitHub에 코드 올리기

### GitHub 계정 만들기
1. https://github.com 접속
2. "Sign up" 클릭
3. 이메일, 비밀번호 입력
4. 계정 생성 완료

### 저장소 만들기
1. GitHub 로그인
2. 오른쪽 위 `+` 버튼 → "New repository" 클릭
3. Repository name: `wedding-budget-app`
4. Public 선택 (무료)
5. "Create repository" 클릭

### 코드 업로드

**VS Code에서:**

1. **Git 초기화**
   - VS Code 터미널 열기 (`Ctrl + ` )
   - 다음 명령어 실행:
   ```bash
   git init
   git add .
   git commit -m "Initial commit"
   ```

2. **GitHub에 연결**
   ```bash
   git remote add origin https://github.com/당신의아이디/wedding-budget-app.git
   git branch -M main
   git push -u origin main
   ```

---

## 🗄️ 2단계: 데이터베이스 배포 (Supabase)

### Supabase 설정

1. **회원가입**
   - https://supabase.com 접속
   - "Start your project" 클릭
   - GitHub 계정으로 로그인

2. **프로젝트 생성**
   - "New Project" 클릭
   - Project name: `wedding-budget`
   - Database Password: 강력한 비밀번호 입력 (저장해두세요!)
   - Region: Northeast Asia (Seoul) 선택
   - "Create new project" 클릭
   - 약 2분 대기

3. **데이터베이스 정보 확인**
   - 왼쪽 메뉴 → "Project Settings" → "Database"
   - Connection string 복사 (나중에 사용)

4. **테이블 생성**
   - 왼쪽 메뉴 → "SQL Editor"
   - "New query" 클릭
   - `backend/src/config/migrate.ts` 파일의 SQL 코드 복사
   - 붙여넣기 후 "Run" 클릭

---

## 🌐 3단계: 백엔드 배포 (Railway)

### Railway 설정

1. **회원가입**
   - https://railway.app 접속
   - "Start a New Project" 클릭
   - GitHub 계정으로 로그인

2. **프로젝트 배포**
   - "Deploy from GitHub repo" 선택
   - `wedding-budget-app` 저장소 선택
   - "Deploy Now" 클릭

3. **환경 변수 설정**
   - 프로젝트 클릭 → "Variables" 탭
   - 다음 변수들 추가:

   ```
   NODE_ENV=production
   PORT=3000
   
   # Supabase 데이터베이스 정보
   DB_HOST=db.xxxxxxxxxxxxx.supabase.co
   DB_PORT=5432
   DB_NAME=postgres
   DB_USER=postgres
   DB_PASSWORD=Supabase에서_설정한_비밀번호
   
   # JWT (랜덤 문자열 생성)
   JWT_SECRET=랜덤한_긴_문자열_32자_이상
   JWT_REFRESH_SECRET=또_다른_랜덤_문자열_32자_이상
   JWT_EXPIRES_IN=7d
   JWT_REFRESH_EXPIRES_IN=30d
   
   # Upload
   UPLOAD_DIR=uploads
   MAX_FILE_SIZE=5242880
   
   # CORS (나중에 Vercel URL로 변경)
   CORS_ORIGIN=*
   ```

4. **배포 URL 확인**
   - "Settings" → "Domains"
   - 생성된 URL 복사 (예: `https://wedding-budget-production.up.railway.app`)

---

## 🎨 4단계: 프론트엔드 배포 (Vercel)

### Vercel 설정

1. **회원가입**
   - https://vercel.com 접속
   - "Start Deploying" 클릭
   - GitHub 계정으로 로그인

2. **프로젝트 가져오기**
   - "Add New..." → "Project" 클릭
   - `wedding-budget-app` 저장소 선택
   - "Import" 클릭

3. **빌드 설정**
   - Framework Preset: Vite
   - Root Directory: `./` (기본값)
   - Build Command: `npm run build`
   - Output Directory: `dist`

4. **환경 변수 설정**
   - "Environment Variables" 섹션
   - 변수 추가:
   ```
   VITE_API_URL=https://your-railway-url.up.railway.app/api
   ```
   (Railway에서 복사한 URL 사용)

5. **배포**
   - "Deploy" 클릭
   - 약 2-3분 대기
   - 배포 완료!

6. **URL 확인**
   - 생성된 URL 복사 (예: `https://wedding-budget-app.vercel.app`)

---

## 🔧 5단계: CORS 설정 업데이트

### Railway 환경 변수 수정

1. Railway 프로젝트 → "Variables"
2. `CORS_ORIGIN` 값을 Vercel URL로 변경:
   ```
   CORS_ORIGIN=https://wedding-budget-app.vercel.app
   ```
3. 저장 → 자동 재배포

---

## ✅ 6단계: 테스트

1. **Vercel URL 접속**
   - 브라우저에서 Vercel URL 열기
   - 로그인 페이지 확인

2. **회원가입 테스트**
   - 회원가입 버튼 클릭
   - 정보 입력 후 가입
   - 로그인 확인

3. **기능 테스트**
   - 예산 설정
   - 지출 추가
   - 식장 추가
   - 모든 기능 정상 작동 확인

---

## 🎉 완료!

이제 다른 사람들과 URL을 공유하면 됩니다!

**공유 URL:**
```
https://wedding-budget-app.vercel.app
```

---

## 💰 비용

- **Vercel**: 무료 (월 100GB 대역폭)
- **Railway**: $5 크레딧/월 (무료)
- **Supabase**: 무료 (500MB 데이터베이스)

**총 비용: 무료!** 🎉

---

## 🔄 업데이트 방법

코드를 수정한 후:

```bash
git add .
git commit -m "업데이트 내용"
git push
```

→ Vercel과 Railway가 자동으로 재배포합니다!

---

## 📱 커스텀 도메인 (선택사항)

### 무료 도메인
- Freenom: https://www.freenom.com
- .tk, .ml, .ga 등 무료 도메인 제공

### 유료 도메인
- Namecheap: https://www.namecheap.com
- 연간 $10-15

### Vercel에 도메인 연결
1. Vercel 프로젝트 → "Settings" → "Domains"
2. 도메인 입력
3. DNS 설정 안내에 따라 설정

---

## 🛡️ 보안 체크리스트

배포 전 확인:

- [ ] `.env` 파일이 `.gitignore`에 포함되어 있는지
- [ ] JWT_SECRET이 강력한 랜덤 문자열인지
- [ ] 데이터베이스 비밀번호가 강력한지
- [ ] CORS_ORIGIN이 올바르게 설정되었는지
- [ ] 프로덕션 환경 변수가 모두 설정되었는지

---

## 🆘 문제 해결

### "502 Bad Gateway"
- Railway 환경 변수 확인
- 데이터베이스 연결 정보 확인
- Railway 로그 확인

### "CORS Error"
- Railway의 CORS_ORIGIN 확인
- Vercel URL과 일치하는지 확인

### "Database connection failed"
- Supabase 데이터베이스 정보 확인
- 비밀번호 확인
- 테이블이 생성되었는지 확인

---

## 📊 모니터링

### Vercel Analytics
- Vercel 프로젝트 → "Analytics"
- 방문자 수, 성능 확인

### Railway Logs
- Railway 프로젝트 → "Deployments" → "View Logs"
- 에러 확인

### Supabase Dashboard
- Supabase → "Database" → "Tables"
- 데이터 확인

---

## 🎓 다음 단계

1. **커스텀 도메인 연결**
2. **Google Analytics 추가**
3. **SEO 최적화**
4. **PWA 변환** (모바일 앱처럼 사용)
5. **이메일 알림 추가**

---

## 💡 팁

- Railway는 매월 $5 크레딧을 제공합니다
- Vercel은 자동 HTTPS를 제공합니다
- Supabase는 자동 백업을 제공합니다
- GitHub Actions로 자동 테스트를 추가할 수 있습니다

---

배포 중 문제가 생기면 언제든지 물어보세요! 😊
